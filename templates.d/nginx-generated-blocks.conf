    # ---- BEGIN GENERATED CODE ---- -*- awk -*-

    # polite blocks (generated)

    %%IF %SUPPRESS_TOR2WEB%
    # polite block for suppress_tor2web (generated)
    %%CSV %SUPPRESS_TOR2WEB%
    if ( $http_x_tor2web ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for suppress_tor2web (generated)
    %%ENDIF

    %%IF %BLOCK_HOST%
    # polite block for block_host (generated)
    %%CSV %BLOCK_HOST%
    if ( $host = "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_host (generated)
    %%ENDIF

    %%IF %BLOCK_HOST_RE%
    # polite block for block_host_re (generated)
    %%CSV %BLOCK_HOST_RE%
    if ( $host ~* "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_host_re (generated)
    %%ENDIF

    %%IF %BLOCK_PATH%
    # polite block for block_path (generated)
    %%CSV %BLOCK_PATH%
    if ( $uri = "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_path (generated)
    %%ENDIF

    %%IF %BLOCK_PATH_RE%
    # polite block for block_path_re (generated)
    %%CSV %BLOCK_PATH_RE%
    if ( $uri ~* "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_path_re (generated)
    %%ENDIF

    %%IF %BLOCK_LOCATION%
    # polite block for block_location (generated)
    %%CSV %BLOCK_LOCATION%
    location %0% { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_location (generated)
    %%ENDIF

    %%IF %BLOCK_LOCATION_RE%
    # polite block for block_location_re (generated)
    %%CSV %BLOCK_LOCATION_RE%
    location ~* "%0%" { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_location_re (generated)
    %%ENDIF

    %%IF %BLOCK_PARAM%
    # polite block for block_param (generated)
    %%CSV %BLOCK_PARAM%
    if ( $arg_%1% = "%2%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_param (generated)
    %%ENDIF

    %%IF %BLOCK_PARAM_RE%
    # polite block for block_param_re (generated)
    %%CSV %BLOCK_PARAM_RE%
    if ( $arg_%1% ~* "%2%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no polite block for block_param_re (generated)
    %%ENDIF


    # blacklists (generated)

    %%IF %USER_AGENT_BLACKLIST_RE%
    # check user_agent_blacklist_re (generated)
    %%CSV %USER_AGENT_BLACKLIST_RE%
    if ( $http_user_agent ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no user_agent_blacklist_re (generated)
    %%ENDIF

    %%IF %REFERER_BLACKLIST_RE%
    # check referer_blacklist_re (generated)
    %%CSV %REFERER_BLACKLIST_RE%
    if ( $http_referer ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no referer_blacklist_re (generated)
    %%ENDIF

    %%IF %HOST_BLACKLIST_RE%
    # check host_blacklist_re (generated)
    %%CSV %HOST_BLACKLIST_RE%
    if ( $http_host ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no host_blacklist_re (generated)
    %%ENDIF

    %%IF %PATH_BLACKLIST_RE%
    # check path_blacklist_re (generated)
    %%CSV %PATH_BLACKLIST_RE%
    if ( $uri ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no path_blacklist_re (generated)
    %%ENDIF

    %%IF %PARAM_BLACKLIST_RE%
    # check param_blacklist_re (generated)
    %%CSV %PARAM_BLACKLIST_RE%
    if ( $arg_%1% ~* "%2%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no param_blacklist_re (generated)
    %%ENDIF


    # redirects (generated)

    %%IF %REDIRECT_HOST_CSV%
    # redirect redirect_host_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_HOST_CSV%
    if ( $host ~* "%1%" ) { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect redirect_host_csv (generated)
    %%ENDIF

    %%IF %REDIRECT_PATH_CSV%
    # redirect redirect_path_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_PATH_CSV%
    if ( $uri ~* "%1%" ) { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect redirect_path_csv (generated)
    %%ENDIF

    %%IF %REDIRECT_LOCATION_CSV%
    # redirect redirect_location_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_LOCATION_CSV%
    location ~* "%1%" { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect redirect_location_csv (generated)
    %%ENDIF


    # whitelists (generated)

    %%IF %USER_AGENT_WHITELIST_RE%
    # check user_agent_whitelist_re (generated)
    set $non_whitelist_user_agent 1;
    %%CSV %USER_AGENT_WHITELIST_RE%
    if ( $http_user_agent ~* "%0%" ) { set $non_whitelist_user_agent 0; }
    %%ENDCSV
    %%ELSE
    # no user_agent_whitelist_re (generated)
    %%ENDIF

    %%IF %REFERER_WHITELIST_RE%
    # check referer_whitelist_re (generated)
    set $non_whitelist_referer 1;
    %%CSV %REFERER_WHITELIST_RE%
    if ( $http_referer ~* "%0%" ) { set $non_whitelist_referer 0; }
    %%ENDCSV
    %%ELSE
    # no referer_whitelist_re (generated)
    %%ENDIF

    %%IF %HOST_WHITELIST_RE%
    # check host_whitelist_re (generated)
    set $non_whitelist_host 1;
    %%CSV %HOST_WHITELIST_RE%
    if ( $http_host ~* "%0%" ) { set $non_whitelist_host 0; }
    %%ENDCSV
    %%ELSE
    # no host_whitelist_re (generated)
    %%ENDIF

    %%IF %PATH_WHITELIST_RE%
    # check path_whitelist_re (generated)
    set $non_whitelist_path 1;
    %%CSV %PATH_WHITELIST_RE%
    if ( $uri ~* "%0%" ) { set $non_whitelist_path 0; }
    %%ENDCSV
    %%ELSE
    # no path_whitelist_re (generated)
    %%ENDIF

    %%IF %PARAM_WHITELIST_RE%
    # check param_whitelist_re (generated)
    set $non_whitelist_param 1;
    %%CSV %PARAM_WHITELIST_RE%
    if ( $arg_%1% ~* "%2%" ) { set $non_whitelist_param 0; }
    %%ENDCSV
    %%ELSE
    # no param_whitelist_re (generated)
    %%ENDIF


    # ---- END GENERATED CODE ----
