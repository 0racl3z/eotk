    # ---- BEGIN GENERATED CODE ---- -*- awk -*-

    # polite blocks (generated)
    %%IF %SUPPRESS_TOR2WEB%
    # polite block for suppress_tor2web (generated)
    %%CSV %SUPPRESS_TOR2WEB%
    if ( $http_x_tor2web ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no suppress_tor2web
    %%ENDIF
    %%IF %BLOCK_HOST%
    # polite block for block_host (generated)
    %%CSV %BLOCK_HOST%
    if ( $host = "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_host
    %%ENDIF
    %%IF %BLOCK_HOST_RE%
    # polite block for block_host_re (generated)
    %%CSV %BLOCK_HOST_RE%
    if ( $host ~* "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_host_re
    %%ENDIF
    %%IF %BLOCK_PATH%
    # polite block for block_path (generated)
    %%CSV %BLOCK_PATH%
    if ( $uri = "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_path
    %%ENDIF
    %%IF %BLOCK_PATH_RE%
    # polite block for block_path_re (generated)
    %%CSV %BLOCK_PATH_RE%
    if ( $uri ~* "%0%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_path_re
    %%ENDIF
    %%IF %BLOCK_LOCATION%
    # polite block for block_location (generated)
    %%CSV %BLOCK_LOCATION%
    location %0% { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_location
    %%ENDIF
    %%IF %BLOCK_LOCATION_RE%
    # polite block for block_location_re (generated)
    %%CSV %BLOCK_LOCATION_RE%
    location ~* "%0%" { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_location_re
    %%ENDIF
    %%IF %BLOCK_PARAM%
    # polite block for block_param (generated)
    %%CSV %BLOCK_PARAM%
    if ( $arg_%1% = "%2%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_param
    %%ENDIF
    %%IF %BLOCK_PARAM_RE%
    # polite block for block_param_re (generated)
    %%CSV %BLOCK_PARAM_RE%
    if ( $arg_%1% ~* "%2%" ) { return 403 "%BLOCK_ERR%"; }
    %%ENDCSV
    %%ELSE
    # no block_param_re
    %%ENDIF

    # blacklists (generated)
    %%IF %USER_AGENT_BLACKLIST%
    # check user_agent_blacklist (generated)
    %%CSV %USER_AGENT_BLACKLIST%
    if ( $http_user_agent = "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no user_agent_blacklist
    %%ENDIF
    %%IF %USER_AGENT_BLACKLIST_RE%
    # check user_agent_blacklist_re (generated)
    %%CSV %USER_AGENT_BLACKLIST_RE%
    if ( $http_user_agent ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no user_agent_blacklist_re
    %%ENDIF
    %%IF %REFERER_BLACKLIST%
    # check referer_blacklist (generated)
    %%CSV %REFERER_BLACKLIST%
    if ( $http_referer = "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no referer_blacklist
    %%ENDIF
    %%IF %REFERER_BLACKLIST_RE%
    # check referer_blacklist_re (generated)
    %%CSV %REFERER_BLACKLIST_RE%
    if ( $http_referer ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no referer_blacklist_re
    %%ENDIF
    %%IF %HOST_BLACKLIST%
    # check host_blacklist (generated)
    %%CSV %HOST_BLACKLIST%
    if ( $http_host = "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no host_blacklist
    %%ENDIF
    %%IF %HOST_BLACKLIST_RE%
    # check host_blacklist_re (generated)
    %%CSV %HOST_BLACKLIST_RE%
    if ( $http_host ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no host_blacklist_re
    %%ENDIF
    %%IF %PATH_BLACKLIST%
    # check path_blacklist (generated)
    %%CSV %PATH_BLACKLIST%
    if ( $uri = "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no path_blacklist
    %%ENDIF
    %%IF %PATH_BLACKLIST_RE%
    # check path_blacklist_re (generated)
    %%CSV %PATH_BLACKLIST_RE%
    if ( $uri ~* "%0%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no path_blacklist_re
    %%ENDIF
    %%IF %PARAM_BLACKLIST%
    # check param_blacklist (generated)
    %%CSV %PARAM_BLACKLIST%
    if ( $arg_%1% = "%2%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no param_blacklist
    %%ENDIF
    %%IF %PARAM_BLACKLIST_RE%
    # check param_blacklist_re (generated)
    %%CSV %PARAM_BLACKLIST_RE%
    if ( $arg_%1% ~* "%2%" ) { %NGINX_ACTION_ABORT%; }
    %%ENDCSV
    %%ELSE
    # no param_blacklist_re
    %%ENDIF

    # redirects (generated)
    %%IF %REDIRECT_HOST_CSV%
    # redirect redirect_host_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_HOST_CSV%
    if ( $host ~* "%1%" ) { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect_host_csv
    %%ENDIF
    %%IF %REDIRECT_PATH_CSV%
    # redirect redirect_path_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_PATH_CSV%
    if ( $uri ~* "%1%" ) { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect_path_csv
    %%ENDIF
    %%IF %REDIRECT_LOCATION_CSV%
    # redirect redirect_location_csv: 1=regexp,2=dest,3=code (generated)
    %%CSV %REDIRECT_LOCATION_CSV%
    location ~* "%1%" { return %3% %2%$request_uri; }
    %%ENDCSV
    %%ELSE
    # no redirect_location_csv
    %%ENDIF

    # whitelists (generated)
    %%IF %USER_AGENT_WHITELIST%
    # check user_agent_whitelist (generated)
    set $fail_user_agent_whitelist 1;
    %%CSV %USER_AGENT_WHITELIST%
    if ( $http_user_agent = "%0%" ) { set $fail_user_agent_whitelist 0; }
    %%ENDCSV
    %%ELSE
    # no user_agent_whitelist
    %%ENDIF
    %%IF %USER_AGENT_WHITELIST_RE%
    # check user_agent_whitelist_re (generated)
    set $fail_user_agent_whitelist_re 1;
    %%CSV %USER_AGENT_WHITELIST_RE%
    if ( $http_user_agent ~* "%0%" ) { set $fail_user_agent_whitelist_re 0; }
    %%ENDCSV
    %%ELSE
    # no user_agent_whitelist_re
    %%ENDIF
    %%IF %REFERER_WHITELIST%
    # check referer_whitelist (generated)
    set $fail_referer_whitelist 1;
    %%CSV %REFERER_WHITELIST%
    if ( $http_referer = "%0%" ) { set $fail_referer_whitelist 0; }
    %%ENDCSV
    %%ELSE
    # no referer_whitelist
    %%ENDIF
    %%IF %REFERER_WHITELIST_RE%
    # check referer_whitelist_re (generated)
    set $fail_referer_whitelist_re 1;
    %%CSV %REFERER_WHITELIST_RE%
    if ( $http_referer ~* "%0%" ) { set $fail_referer_whitelist_re 0; }
    %%ENDCSV
    %%ELSE
    # no referer_whitelist_re
    %%ENDIF
    %%IF %HOST_WHITELIST%
    # check host_whitelist (generated)
    set $fail_host_whitelist 1;
    %%CSV %HOST_WHITELIST%
    if ( $http_host = "%0%" ) { set $fail_host_whitelist 0; }
    %%ENDCSV
    %%ELSE
    # no host_whitelist
    %%ENDIF
    %%IF %HOST_WHITELIST_RE%
    # check host_whitelist_re (generated)
    set $fail_host_whitelist_re 1;
    %%CSV %HOST_WHITELIST_RE%
    if ( $http_host ~* "%0%" ) { set $fail_host_whitelist_re 0; }
    %%ENDCSV
    %%ELSE
    # no host_whitelist_re
    %%ENDIF
    %%IF %PATH_WHITELIST%
    # check path_whitelist (generated)
    set $fail_path_whitelist 1;
    %%CSV %PATH_WHITELIST%
    if ( $uri = "%0%" ) { set $fail_path_whitelist 0; }
    %%ENDCSV
    %%ELSE
    # no path_whitelist
    %%ENDIF
    %%IF %PATH_WHITELIST_RE%
    # check path_whitelist_re (generated)
    set $fail_path_whitelist_re 1;
    %%CSV %PATH_WHITELIST_RE%
    if ( $uri ~* "%0%" ) { set $fail_path_whitelist_re 0; }
    %%ENDCSV
    %%ELSE
    # no path_whitelist_re
    %%ENDIF
    %%IF %PARAM_WHITELIST%
    # check param_whitelist (generated)
    set $fail_param_whitelist 1;
    %%CSV %PARAM_WHITELIST%
    if ( $arg_%1% = "%2%" ) { set $fail_param_whitelist 0; }
    %%ENDCSV
    %%ELSE
    # no param_whitelist
    %%ENDIF
    %%IF %PARAM_WHITELIST_RE%
    # check param_whitelist_re (generated)
    set $fail_param_whitelist_re 1;
    %%CSV %PARAM_WHITELIST_RE%
    if ( $arg_%1% ~* "%2%" ) { set $fail_param_whitelist_re 0; }
    %%ENDCSV
    %%ELSE
    # no param_whitelist_re
    %%ENDIF

    # ---- END GENERATED CODE ----
